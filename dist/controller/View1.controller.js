sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,a,r,n){"use strict";return e.extend("demo5.controller.View1",{onInit:function(){var e=new t({inwardList:[]});this.getView().setModel(e,"tableModel");this._fetchData()},_fetchData:function(){var e="S4C/sap/opu/odata/sap/YY1_GATEIN_CDS/YY1_GATEIN";a.show("Fetching data, please wait...");fetch(e,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"}).then(e=>{if(!e.ok){throw new Error("Network response was not ok: "+e.statusText)}return e.json()}).then(e=>{var t=e.d.results||[];t.forEach(function(e){if(e.EntryDate){var t=parseInt(e.EntryDate.match(/\d+/)[0]);var a=new Date(t);var r=String(a.getDate()).padStart(2,"0")+"-"+String(a.getMonth()+1).padStart(2,"0")+"-"+a.getFullYear();e.EntryDate=r}});this.getView().getModel("tableModel").setProperty("/inwardList",t);a.show("Data fetched successfully.")}).catch(e=>{a.show("Failed to fetch data: "+e.message)})},onSearch:function(){var e=[];var t=this.byId("searchGateInwardNo").getValue();var a=this.byId("searchSupplierName").getValue();var o=this.byId("searchPONumber").getValue();var s=this.byId("entryDate").getDateValue();var i=this.byId("searchCancelled").getValue();if(t){e.push(new r("GateInwardNo",n.Contains,t))}if(a){e.push(new r("SupplierName",n.Contains,a))}if(o){e.push(new r("PurchaseOrderNo",n.Contains,o))}if(s){var d=String(s.getDate()).padStart(2,"0");var l=String(s.getMonth()+1).padStart(2,"0");var w=s.getFullYear();var p=`${d}-${l}-${w}`;e.push(new r("EntryDate",n.EQ,p))}if(i){e.push(new r("Cancelled",n.Contains,i))}var u=this.byId("inwardTable");var c=u.getBinding("items");c.filter(e)},onNewInward:function(){sap.m.MessageToast.show("Pressed + New Inward");var e=sap.ui.core.UIComponent.getRouterFor(this);if(!e){sap.m.MessageToast.show("Router not found!");return}e.navTo("NewInward")},onDownloadPDF:function(e){var t=e.getSource().getBindingContext("tableModel");var r=t.getProperty("GateInwardNo");var n=t.getProperty("SupplierName");var o=t.getProperty("PONumber");var s=t.getProperty("EntryDate");var i=t.getProperty("Cancelled");const{jsPDF:d}=window.jspdf;var l=new d;l.setFontSize(18);l.text("Inward Details",10,10);l.setFontSize(12);l.text("Gate Inward No: "+r,10,20);l.text("Supplier Name: "+n,10,30);l.text("PO Number: "+o,10,40);l.text("Entry Date: "+s,10,50);l.text("Cancelled: "+(i?"Yes":"No"),10,60);var w="Inward_Details_"+r+".pdf";l.save(w);a.show("PDF downloaded for Gate Inward No: "+r)},onViewInward:function(e){var t=e.getSource().getBindingContext("tableModel");var a=t.getObject();sap.m.MessageToast.show("Selected: "+a.GateInwardNo);var r=new sap.ui.model.json.JSONModel(a);this.getOwnerComponent().setModel(r,"selectedRowModel");this.getOwnerComponent().getRouter().navTo("ViewInwardData",{inwardId:a.GateInwardNo})}})});
//# sourceMappingURL=View1.controller.js.map